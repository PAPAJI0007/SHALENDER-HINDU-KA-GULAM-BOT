<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>शेलेन्द्र हिन्दू का गुलाम बोट राम इंडिया एफ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f2f5;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 600px;
        }
        h1 {
            text-align: center;
            color: #1877f2;
        }
        .input-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input, textarea, select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-sizing: border-box;
        }
        button {
            width: 100%;
            padding: 10px;
            background-color: #1877f2;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-bottom: 10px;
        }
        button:hover {
            background-color: #166fe5;
        }
        #log {
            background: #f0f0f0;
            padding: 10px;
            height: 200px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-top: 10px;
        }
        .log-entry {
            margin: 5px 0;
            padding: 5px;
            border-bottom: 1px solid #ddd;
        }
        .log-entry.error {
            color: red;
        }
        .settings-group {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>शेलेन्द्र हिन्दू का गुलाम बोट राम इंडिया एफ</h1>
        <div class="input-group">
            <label for="userId">User ID:</label>
            <input type="text" id="userId" placeholder="Enter your User ID">
        </div>
        <div class="input-group">
            <label for="prefix">Prefix:</label>
            <input type="text" id="prefix" value="#" placeholder="Enter command prefix">
        </div>
        <div class="input-group">
            <label for="adminId">Admin ID:</label>
            <input type="text" id="adminId" placeholder="Enter admin ID">
        </div>
        <div class="input-group">
            <label for="cookie">Cookie File:</label>
            <input type="file" id="cookie" accept=".txt">
        </div>
        <button onclick="startBot()">Start Bot</button>
        <button onclick="stopBot()">Stop Bot</button>
        <div class="input-group">
            <label for="abuse">Abuse Messages (abuse.txt):</label>
            <textarea id="abuse" rows="5" placeholder="Enter abuse messages (one per line)"></textarea>
            <button onclick="uploadAbuse()">Upload Abuse Messages</button>
        </div>
        <div class="input-group">
            <label for="welcome">Welcome Messages (welcome.txt):</label>
            <textarea id="welcome" rows="5" placeholder="Enter welcome messages (one per line)"></textarea>
            <button onclick="saveWelcome()">Save Welcome Messages</button>
        </div>
        <div class="settings-group">
            <label>Bot Settings:</label>
            <label><input type="checkbox" id="autoSpamAccept"> Auto Spam Accept</label>
            <label><input type="checkbox" id="autoMessageAccept"> Auto Message Accept</label>
            <label><input type="checkbox" id="autoConvo"> Auto Convo</label>
            <button onclick="saveSettings()">Save Settings</button>
        </div>
        <div id="log"></div>
    </div>

    <script>
        let ws;

        function connectWebSocket() {
            ws = new WebSocket(`ws://${window.location.host}`);
            ws.onopen = () => {
                addLog('WebSocket connected');
                ws.send(JSON.stringify({ type: 'getStatus' }));
            };
            ws.onmessage = (event) => {
                const data = JSON.parse(event.data);
                if (data.type === 'log') {
                    addLog(data.message, data.userId);
                } else if (data.type === 'status') {
                    const status = data.running ? 'Running' : 'Stopped';
                    addLog(`Bot status for user ${data.userId || 'all'}: ${status}`);
                } else if (data.type === 'settings') {
                    document.getElementById('autoSpamAccept').checked = data.autoSpamAccept;
                    document.getElementById('autoMessageAccept').checked = data.autoMessageAccept;
                    document.getElementById('autoConvo').checked = data.autoConvo;
                    addLog('Settings loaded');
                }
            };
            ws.onclose = () => {
                addLog('WebSocket disconnected. Reconnecting...');
                setTimeout(connectWebSocket, 5000);
            };
            ws.onerror = (error) => {
                addLog('WebSocket error: ' + error.message, null, true);
            };
        }

        function addLog(message, userId = null, isError = false) {
            const logDiv = document.getElementById('log');
            const entry = document.createElement('div');
            entry.className = 'log-entry' + (isError ? ' error' : '');
            entry.textContent = (userId ? `[User ${userId}] ` : '') + message;
            logDiv.appendChild(entry);
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        function startBot() {
            const userId = document.getElementById('userId').value;
            const prefix = document.getElementById('prefix').value;
            const adminId = document.getElementById('adminId').value;
            const cookieInput = document.getElementById('cookie').files[0];

            if (!userId) {
                addLog('Please enter a User ID', null, true);
                return;
            }
            if (!cookieInput) {
                addLog('Please select a cookie file', null, true);
                return;
            }

            const reader = new FileReader();
            reader.onload = () => {
                if (ws && ws.readyState === WebSocket.OPEN) {
                    ws.send(JSON.stringify({
                        type: 'start',
                        userId,
                        cookieContent: reader.result,
                        prefix: prefix || '#',
                        adminId
                    }));
                    addLog('Start request sent for user ' + userId);
                } else {
                    addLog('WebSocket not connected', null, true);
                }
            };
            reader.readAsText(cookieInput);
        }

        function stopBot() {
            const userId = document.getElementById('userId').value;
            if (!userId) {
                addLog('Please enter a User ID', null, true);
                return;
            }
            if (ws && ws.readyState === WebSocket.OPEN) {
                ws.send(JSON.stringify({ type: 'stop', userId }));
                addLog('Stop request sent for user ' + userId);
            } else {
                addLog('WebSocket not connected', null, true);
            }
        }

        function uploadAbuse() {
            const abuseContent = document.getElementById('abuse').value;
            if (!abuseContent) {
                addLog('Abuse messages cannot be empty', null, true);
                return;
            }
            if (ws && ws.readyState === WebSocket.OPEN) {
                ws.send(JSON.stringify({ type: 'uploadAbuse', content: abuseContent }));
                addLog('Abuse messages upload request sent');
            } else {
                addLog('WebSocket not connected', null, true);
            }
        }

        function saveWelcome() {
            const welcomeContent = document.getElementById('welcome').value;
            if (!welcomeContent) {
                addLog('Welcome messages cannot be empty', null, true);
                return;
            }
            if (ws && ws.readyState === WebSocket.OPEN) {
                ws.send(JSON.stringify({ type: 'saveWelcome', content: welcomeContent }));
                addLog('Welcome messages save request sent');
            } else {
                addLog('WebSocket not connected', null, true);
            }
        }

        function saveSettings() {
            const autoSpamAccept = document.getElementById('autoSpamAccept').checked;
            const autoMessageAccept = document.getElementById('autoMessageAccept').checked;
            const autoConvo = document.getElementById('autoConvo').checked;
            if (ws && ws.readyState === WebSocket.OPEN) {
                ws.send(JSON.stringify({
                    type: 'saveSettings',
                    autoSpamAccept,
                    autoMessageAccept,
                    autoConvo
                }));
                addLog('Settings save request sent');
            } else {
                addLog('WebSocket not connected', null, true);
            }
        }

        connectWebSocket();
    </script>
</body>
</html>
